<!-- 分页工具 -->
{% macro widget_pagination(pagination, endpoint, fragment='') %}
    <ul class="pagination">
        <li{% if not pagination.has_prev %} class="disabled"{% endif %}>
            <a href="{% if pagination.has_prev %}{{ url_for(endpoint, page=pagination.prev_num, **kwargs) }}{{ fragment }}{% else %}#{% endif %}">&laquo;</a>
        </li>
        {% for p in pagination.iter_pages() %}{% if p %}{% if p == pagination.page %}<li class="active">
            <a href="{{ url_for(endpoint, page = p, **kwargs) }}{{ fragment }}">{{ p }}</a>
        </li>{% else %}<li>
            <a href="{{ url_for(endpoint, page = p, **kwargs) }}{{ fragment }}">{{ p }}</a>
        </li>{% endif %}{% else %}<li class="disabled"><a href="#">&hellip;</a></li>{% endif %}{% endfor %}
        <li{% if not pagination.has_next %} class="disabled"{% endif %}>
            <a href="{% if pagination.has_next %}{{ url_for(endpoint, page=pagination.next_num, **kwargs) }}{{ fragment }}{% else %}#{% endif %}">&raquo;</a>
        </li>
    </ul>
{% endmacro %}


<!-- 各版块Index页面的分类导航栏 -->
{% macro widget_navigation_tabs(categories, c_sel) %}
    <div class="docs-navigation-tabs">
        <ul class="nav nav-tabs">
            <li role="presentation"{% if None == c_sel %} class="active"{% endif %}>
                <a href="{{ url_for('.index') }}">全部</a>
            </li>{% for c in categories %}
            <li role="presentation"{% if c.id == c_sel %} class="active"{% endif %}>
                <a href="{{ url_for('.index', c_id=c.id) }}">{{ c.name }}</a>
            </li>{% endfor %}
        </ul>
    </div>
{% endmacro %}


<!-- 博客板块的属性信息 -->
<!-- 注意：此处调用update_post_metas，在blog_index页面中存在Bug（解决方案：暂时禁用编辑功能）！ -->
{% macro widget_blog_metas(post, moment, editable=true) %}
    <div class="docs-post-metas">
        <span><i class="glyphicon glyphicon-calendar"></i>{{ moment(post.timestamp).format('YYYY-MM-DD HH:mm:ss') }}</span>
        <span><i class="glyphicon glyphicon-bookmark"></i><a href="{{ url_for('.index', c_id=post.category.id) }}">{{ post.category.name }}</a></span>
        {% for tag in post.tags %}<span><i class="glyphicon glyphicon-tag"></i>{{ tag.name }}</span>{% endfor %}
        {% if editable %}
        <span><i class="glyphicon glyphicon-pencil" role="button" onclick="$('#docs-edit-metas-{{ post.id }}').toggleClass('hidden');$(this).toggleClass('docs-text-blog');"></i></span>
        <div id="docs-edit-metas-{{ post.id }}" class="docs-edit-metas hidden">{% for tag in post.category.tags %}
            <label class="checkbox-inline">
                <input type="checkbox" name="metas-cb-{{ tag.id }}" value="{{ tag.id }}"{% if tag in post.tags %} checked{% endif %}/> {{ tag.name }}
            </label>{% endfor %}
            <label class="checkbox-inline" onclick="update_post_metas('{{ url_for('.edit_tags', post_id=post.id) }}')"><span class="glyphicon glyphicon-ok docs-text-blog"></span></label>
        </div>
        {% endif %}
    </div>
{% endmacro %}
