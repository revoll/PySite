{% extends "blog/blog_base_2.html" %}
{% import "common/macros.html" as macros %}


{% block title %}Index | PySite - Blog{% endblock %}


{% block blog_main %}
    {{ macros.widget_navigation_tabs(categories, c_sel) }}

    {% if current_user.can(Permission.CURD_BLOG) %}<div>
        <a href="javascript:create_post('{{ url_for('.add_post') }}')" class="docs-page-tool pull-right"><span class="glyphicon glyphicon-plus text-muted"></span></a>
    </div>{% endif %}

    <div class="clearfix"></div>

    <div class="blog-item-list">{% for post in posts %}
        <div class="blog-item-wrapper">
            <h2 class="blog-item-title"><a href="{{ url_for('.get_post', post_id=post.id) }}" class="docs-text-blog">{{ post.title }}</a>{% if post.private %}<small><span class="glyphicon glyphicon-eye-close"></span></small>{% endif %}</h2>
            {{ macros.widget_blog_metas(post, moment, editable=false) }}
            {% if post.cover_url %}<img src="{{ post.cover_url }}" class="blog-item-thumbnail"/>{% endif %}
            <div class="blog-item-abstract">
                {{ post.body_text }}
            </div>
            <div class="clearfix"></div>
        </div>{% endfor %}
    </div>

    {% if pagination %}{{ macros.widget_pagination(pagination, '.index') }}{% endif %}
{% endblock %}
